{
  "id": "/Users/tejas/Sites/LAB/tejjer/node_modules/.pnpm/solid-start@0.2.6_i2cnpwj3ojjdnkycik5yjsstli/node_modules/solid-start/root/InlineStyles.tsx",
  "deps": [],
  "plugins": [
    "vite:load-fallback",
    "solid-start-file-system-router",
    "solid",
    "vite:define"
  ],
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "import { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport type { PageEvent } from \"../server\";\nimport { ServerContext } from \"../server/ServerContext\";\n\ndeclare global {\n  const $ROUTE_LAYOUTS: Record<string, { layouts: any[], id: string }>\n}\n\nvar routeLayouts = $ROUTE_LAYOUTS;\n\nexport { routeLayouts };\n\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\n\ntype NotUndefined<T> = T extends undefined ? never : T;\n\ntype RouterContext = NotUndefined<PageEvent[\"routerContext\"]>\n\nasync function getInlineStyles(env: PageEvent[\"env\"], routerContext: RouterContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo: string[], m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev!.manifest!.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev!.manifest!.find(entry => entry.path === fullPath)!.componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(\n          ...route.layouts\n            .map((key: string) => env.__dev!.manifest!.find(entry => entry.path === key || entry.id === key))\n            .filter(entry => entry)\n            .map(entry => entry!.componentPath)\n        );\n      }\n    }\n    return memo;\n  }, []) : [];\n\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev!.collectStyles!(match);\n  return styles;\n}\n\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n\n  const [resource] = createResource(\n    async () => {\n      if (import.meta.env.SSR) {\n        return await getInlineStyles(context!.env, context!.routerContext!);\n      } else {\n        return {};\n      }\n    },\n    {\n      deferStream: true\n    }\n  );\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return (\n    <Suspense>\n      <Show when={resource()} keyed>\n        {resource => {\n          return (\n            <Style>\n              {Object.entries(resource)\n                .filter(([k]) => style_pattern.test(k))\n                .map(([k, v]) => {\n                  return `/* ${k} */\\n` + v;\n                })\n                .join(\"\\n\") + \" \"}\n            </Style>\n          );\n        }}\n      </Show>\n    </Suspense>\n  );\n}\n",
      "start": 1669937513110,
      "end": 1669937513212
    },
    {
      "name": "solid-start-file-system-router",
      "result": "import { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport type { PageEvent } from \"../server\";\nimport { ServerContext } from \"../server/ServerContext\";\n\ndeclare global {\n  const $ROUTE_LAYOUTS: Record<string, { layouts: any[], id: string }>\n}\n\nconst routeLayouts = {\"/\":{\"id\":\"/\",\"layouts\":[]}};\n\nexport { routeLayouts };\n\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\n\ntype NotUndefined<T> = T extends undefined ? never : T;\n\ntype RouterContext = NotUndefined<PageEvent[\"routerContext\"]>\n\nasync function getInlineStyles(env: PageEvent[\"env\"], routerContext: RouterContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo: string[], m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev!.manifest!.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev!.manifest!.find(entry => entry.path === fullPath)!.componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(\n          ...route.layouts\n            .map((key: string) => env.__dev!.manifest!.find(entry => entry.path === key || entry.id === key))\n            .filter(entry => entry)\n            .map(entry => entry!.componentPath)\n        );\n      }\n    }\n    return memo;\n  }, []) : [];\n\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev!.collectStyles!(match);\n  return styles;\n}\n\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n\n  const [resource] = createResource(\n    async () => {\n      if (import.meta.env.SSR) {\n        return await getInlineStyles(context!.env, context!.routerContext!);\n      } else {\n        return {};\n      }\n    },\n    {\n      deferStream: true\n    }\n  );\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return (\n    <Suspense>\n      <Show when={resource()} keyed>\n        {resource => {\n          return (\n            <Style>\n              {Object.entries(resource)\n                .filter(([k]) => style_pattern.test(k))\n                .map(([k, v]) => {\n                  return `/* ${k} */\\n` + v;\n                })\n                .join(\"\\n\") + \" \"}\n            </Style>\n          );\n        }}\n      </Show>\n    </Suspense>\n  );\n}\n",
      "start": 1669937513212,
      "end": 1669937513212
    },
    {
      "name": "solid",
      "result": "import { createComponent as _$createComponent } from \"solid-js/web\";\nimport { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport { ServerContext } from \"../server/ServerContext\";\nconst routeLayouts = {\n  \"/\": {\n    \"id\": \"/\",\n    \"layouts\": []\n  }\n};\nexport { routeLayouts };\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\nasync function getInlineStyles(env, routerContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo, m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev.manifest.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev.manifest.find(entry => entry.path === fullPath).componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(...route.layouts.map(key => env.__dev.manifest.find(entry => entry.path === key || entry.id === key)).filter(entry => entry).map(entry => entry.componentPath));\n      }\n    }\n    return memo;\n  }, []) : [];\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev.collectStyles(match);\n  return styles;\n}\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n  const [resource] = createResource(async () => {\n    if (import.meta.env.SSR) {\n      return await getInlineStyles(context.env, context.routerContext);\n    } else {\n      return {};\n    }\n  }, {\n    deferStream: true\n  });\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return _$createComponent(Suspense, {\n    get children() {\n      return _$createComponent(Show, {\n        get when() {\n          return resource();\n        },\n        keyed: true,\n        children: resource => {\n          return _$createComponent(Style, {\n            get children() {\n              return Object.entries(resource).filter(([k]) => style_pattern.test(k)).map(([k, v]) => {\n                return `/* ${k} */\\n` + v;\n              }).join(\"\\n\") + \" \";\n            }\n          });\n        }\n      });\n    }\n  });\n}",
      "start": 1669937513212,
      "end": 1669937513218
    },
    {
      "name": "vite:define",
      "result": "import { createComponent as _$createComponent } from \"solid-js/web\";\nimport { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport { ServerContext } from \"../server/ServerContext\";\nconst routeLayouts = {\n  \"/\": {\n    \"id\": \"/\",\n    \"layouts\": []\n  }\n};\nexport { routeLayouts };\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\nasync function getInlineStyles(env, routerContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo, m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev.manifest.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev.manifest.find(entry => entry.path === fullPath).componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(...route.layouts.map(key => env.__dev.manifest.find(entry => entry.path === key || entry.id === key)).filter(entry => entry).map(entry => entry.componentPath));\n      }\n    }\n    return memo;\n  }, []) : [];\n  match.push(\"/Users/tejas/Sites/LAB/tejjer/apps/solid/src/entry-server.tsx\");\n  const styles = await env.__dev.collectStyles(match);\n  return styles;\n}\nexport function InlineStyles() {\n  const isDev = \"production\" === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !true) {\n    return null;\n  }\n  const [resource] = createResource(async () => {\n    if (false) {\n      return await getInlineStyles(context.env, context.routerContext);\n    } else {\n      return {};\n    }\n  }, {\n    deferStream: true\n  });\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return _$createComponent(Suspense, {\n    get children() {\n      return _$createComponent(Show, {\n        get when() {\n          return resource();\n        },\n        keyed: true,\n        children: resource => {\n          return _$createComponent(Style, {\n            get children() {\n              return Object.entries(resource).filter(([k]) => style_pattern.test(k)).map(([k, v]) => {\n                return `/* ${k} */\\n` + v;\n              }).join(\"\\n\") + \" \";\n            }\n          });\n        }\n      });\n    }\n  });\n}",
      "start": 1669937513218,
      "end": 1669937513218
    }
  ],
  "virtual": false
}
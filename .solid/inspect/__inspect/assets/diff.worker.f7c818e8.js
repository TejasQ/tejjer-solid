(function(){"use strict";const U=Symbol("Comlink.proxy"),G=Symbol("Comlink.endpoint"),Q=Symbol("Comlink.releaseProxy"),N=Symbol("Comlink.thrown"),H=o=>typeof o=="object"&&o!==null||typeof o=="function",X={canHandle:o=>H(o)&&o[U],serialize(o){const{port1:h,port2:_}=new MessageChannel;return O(o,h),[_,[_]]},deserialize(o){return o.start(),J(o)}},Y={canHandle:o=>H(o)&&N in o,serialize({value:o}){let h;return o instanceof Error?h={isError:!0,value:{message:o.message,name:o.name,stack:o.stack}}:h={isError:!1,value:o},[h,[]]},deserialize(o){throw o.isError?Object.assign(new Error(o.value.message),o.value):o.value}},z=new Map([["proxy",X],["throw",Y]]);function O(o,h=self){h.addEventListener("message",function _(b){if(!b||!b.data)return;const{id:c,type:r,path:n}=Object.assign({path:[]},b.data),e=(b.data.argumentList||[]).map(R);let a;try{const i=n.slice(0,-1).reduce((s,l)=>s[l],o),t=n.reduce((s,l)=>s[l],o);switch(r){case"GET":a=t;break;case"SET":i[n.slice(-1)[0]]=R(b.data.value),a=!0;break;case"APPLY":a=t.apply(i,e);break;case"CONSTRUCT":{const s=new t(...e);a=x(s)}break;case"ENDPOINT":{const{port1:s,port2:l}=new MessageChannel;O(o,l),a=q(s,[s])}break;case"RELEASE":a=void 0;break;default:return}}catch(i){a={value:i,[N]:0}}Promise.resolve(a).catch(i=>({value:i,[N]:0})).then(i=>{const[t,s]=B(i);h.postMessage(Object.assign(Object.assign({},t),{id:c}),s),r==="RELEASE"&&(h.removeEventListener("message",_),j(h))})}),h.start&&h.start()}function Z(o){return o.constructor.name==="MessagePort"}function j(o){Z(o)&&o.close()}function J(o,h){return F(o,[],h)}function C(o){if(o)throw new Error("Proxy has been released and is not useable")}function F(o,h=[],_=function(){}){let b=!1;const c=new Proxy(_,{get(r,n){if(C(b),n===Q)return()=>L(o,{type:"RELEASE",path:h.map(e=>e.toString())}).then(()=>{j(o),b=!0});if(n==="then"){if(h.length===0)return{then:()=>c};const e=L(o,{type:"GET",path:h.map(a=>a.toString())}).then(R);return e.then.bind(e)}return F(o,[...h,n])},set(r,n,e){C(b);const[a,i]=B(e);return L(o,{type:"SET",path:[...h,n].map(t=>t.toString()),value:a},i).then(R)},apply(r,n,e){C(b);const a=h[h.length-1];if(a===G)return L(o,{type:"ENDPOINT"}).then(R);if(a==="bind")return F(o,h.slice(0,-1));const[i,t]=V(e);return L(o,{type:"APPLY",path:h.map(s=>s.toString()),argumentList:i},t).then(R)},construct(r,n){C(b);const[e,a]=V(n);return L(o,{type:"CONSTRUCT",path:h.map(i=>i.toString()),argumentList:e},a).then(R)}});return c}function K(o){return Array.prototype.concat.apply([],o)}function V(o){const h=o.map(B);return[h.map(_=>_[0]),K(h.map(_=>_[1]))]}const W=new WeakMap;function q(o,h){return W.set(o,h),o}function x(o){return Object.assign(o,{[U]:!0})}function B(o){for(const[h,_]of z)if(_.canHandle(o)){const[b,c]=_.serialize(o);return[{type:"HANDLER",name:h,value:b},c]}return[{type:"RAW",value:o},W.get(o)||[]]}function R(o){switch(o.type){case"HANDLER":return z.get(o.name).deserialize(o.value);case"RAW":return o.value}}function L(o,h,_){return new Promise(b=>{const c=rr();o.addEventListener("message",function r(n){!n.data||!n.data.id||n.data.id!==c||(o.removeEventListener("message",r),b(n.data))}),o.start&&o.start(),o.postMessage(Object.assign({id:c},h),_)})}function rr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var $={exports:{}};(function(o){var h=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},_=-1,b=1,c=0;h.Diff=function(r,n){return[r,n]},h.prototype.diff_main=function(r,n,e,a){typeof a>"u"&&(this.Diff_Timeout<=0?a=Number.MAX_VALUE:a=new Date().getTime()+this.Diff_Timeout*1e3);var i=a;if(r==null||n==null)throw new Error("Null input. (diff_main)");if(r==n)return r?[new h.Diff(c,r)]:[];typeof e>"u"&&(e=!0);var t=e,s=this.diff_commonPrefix(r,n),l=r.substring(0,s);r=r.substring(s),n=n.substring(s),s=this.diff_commonSuffix(r,n);var f=r.substring(r.length-s);r=r.substring(0,r.length-s),n=n.substring(0,n.length-s);var g=this.diff_compute_(r,n,t,i);return l&&g.unshift(new h.Diff(c,l)),f&&g.push(new h.Diff(c,f)),this.diff_cleanupMerge(g),g},h.prototype.diff_compute_=function(r,n,e,a){var i;if(!r)return[new h.Diff(b,n)];if(!n)return[new h.Diff(_,r)];var t=r.length>n.length?r:n,s=r.length>n.length?n:r,l=t.indexOf(s);if(l!=-1)return i=[new h.Diff(b,t.substring(0,l)),new h.Diff(c,s),new h.Diff(b,t.substring(l+s.length))],r.length>n.length&&(i[0][0]=i[2][0]=_),i;if(s.length==1)return[new h.Diff(_,r),new h.Diff(b,n)];var f=this.diff_halfMatch_(r,n);if(f){var g=f[0],u=f[1],v=f[2],m=f[3],w=f[4],p=this.diff_main(g,v,e,a),D=this.diff_main(u,m,e,a);return p.concat([new h.Diff(c,w)],D)}return e&&r.length>100&&n.length>100?this.diff_lineMode_(r,n,a):this.diff_bisect_(r,n,a)},h.prototype.diff_lineMode_=function(r,n,e){var a=this.diff_linesToChars_(r,n);r=a.chars1,n=a.chars2;var i=a.lineArray,t=this.diff_main(r,n,!1,e);this.diff_charsToLines_(t,i),this.diff_cleanupSemantic(t),t.push(new h.Diff(c,""));for(var s=0,l=0,f=0,g="",u="";s<t.length;){switch(t[s][0]){case b:f++,u+=t[s][1];break;case _:l++,g+=t[s][1];break;case c:if(l>=1&&f>=1){t.splice(s-l-f,l+f),s=s-l-f;for(var v=this.diff_main(g,u,!1,e),m=v.length-1;m>=0;m--)t.splice(s,0,v[m]);s=s+v.length}f=0,l=0,g="",u="";break}s++}return t.pop(),t},h.prototype.diff_bisect_=function(r,n,e){for(var a=r.length,i=n.length,t=Math.ceil((a+i)/2),s=t,l=2*t,f=new Array(l),g=new Array(l),u=0;u<l;u++)f[u]=-1,g[u]=-1;f[s+1]=0,g[s+1]=0;for(var v=a-i,m=v%2!=0,w=0,p=0,D=0,A=0,M=0;M<t&&!(new Date().getTime()>e);M++){for(var d=-M+w;d<=M-p;d+=2){var y=s+d,E;d==-M||d!=M&&f[y-1]<f[y+1]?E=f[y+1]:E=f[y-1]+1;for(var S=E-d;E<a&&S<i&&r.charAt(E)==n.charAt(S);)E++,S++;if(f[y]=E,E>a)p+=2;else if(S>i)w+=2;else if(m){var P=s+v-d;if(P>=0&&P<l&&g[P]!=-1){var k=a-g[P];if(E>=k)return this.diff_bisectSplit_(r,n,E,S,e)}}}for(var T=-M+D;T<=M-A;T+=2){var P=s+T,k;T==-M||T!=M&&g[P-1]<g[P+1]?k=g[P+1]:k=g[P-1]+1;for(var I=k-T;k<a&&I<i&&r.charAt(a-k-1)==n.charAt(i-I-1);)k++,I++;if(g[P]=k,k>a)A+=2;else if(I>i)D+=2;else if(!m){var y=s+v-T;if(y>=0&&y<l&&f[y]!=-1){var E=f[y],S=s+E-y;if(k=a-k,E>=k)return this.diff_bisectSplit_(r,n,E,S,e)}}}}return[new h.Diff(_,r),new h.Diff(b,n)]},h.prototype.diff_bisectSplit_=function(r,n,e,a,i){var t=r.substring(0,e),s=n.substring(0,a),l=r.substring(e),f=n.substring(a),g=this.diff_main(t,s,!1,i),u=this.diff_main(l,f,!1,i);return g.concat(u)},h.prototype.diff_linesToChars_=function(r,n){var e=[],a={};e[0]="";function i(f){for(var g="",u=0,v=-1,m=e.length;v<f.length-1;){v=f.indexOf(`
`,u),v==-1&&(v=f.length-1);var w=f.substring(u,v+1);(a.hasOwnProperty?a.hasOwnProperty(w):a[w]!==void 0)?g+=String.fromCharCode(a[w]):(m==t&&(w=f.substring(u),v=f.length),g+=String.fromCharCode(m),a[w]=m,e[m++]=w),u=v+1}return g}var t=4e4,s=i(r);t=65535;var l=i(n);return{chars1:s,chars2:l,lineArray:e}},h.prototype.diff_charsToLines_=function(r,n){for(var e=0;e<r.length;e++){for(var a=r[e][1],i=[],t=0;t<a.length;t++)i[t]=n[a.charCodeAt(t)];r[e][1]=i.join("")}},h.prototype.diff_commonPrefix=function(r,n){if(!r||!n||r.charAt(0)!=n.charAt(0))return 0;for(var e=0,a=Math.min(r.length,n.length),i=a,t=0;e<i;)r.substring(t,i)==n.substring(t,i)?(e=i,t=e):a=i,i=Math.floor((a-e)/2+e);return i},h.prototype.diff_commonSuffix=function(r,n){if(!r||!n||r.charAt(r.length-1)!=n.charAt(n.length-1))return 0;for(var e=0,a=Math.min(r.length,n.length),i=a,t=0;e<i;)r.substring(r.length-i,r.length-t)==n.substring(n.length-i,n.length-t)?(e=i,t=e):a=i,i=Math.floor((a-e)/2+e);return i},h.prototype.diff_commonOverlap_=function(r,n){var e=r.length,a=n.length;if(e==0||a==0)return 0;e>a?r=r.substring(e-a):e<a&&(n=n.substring(0,e));var i=Math.min(e,a);if(r==n)return i;for(var t=0,s=1;;){var l=r.substring(i-s),f=n.indexOf(l);if(f==-1)return t;s+=f,(f==0||r.substring(i-s)==n.substring(0,s))&&(t=s,s++)}},h.prototype.diff_halfMatch_=function(r,n){if(this.Diff_Timeout<=0)return null;var e=r.length>n.length?r:n,a=r.length>n.length?n:r;if(e.length<4||a.length*2<e.length)return null;var i=this;function t(p,D,A){for(var M=p.substring(A,A+Math.floor(p.length/4)),d=-1,y="",E,S,P,k;(d=D.indexOf(M,d+1))!=-1;){var T=i.diff_commonPrefix(p.substring(A),D.substring(d)),I=i.diff_commonSuffix(p.substring(0,A),D.substring(0,d));y.length<I+T&&(y=D.substring(d-I,d)+D.substring(d,d+T),E=p.substring(0,A-I),S=p.substring(A+T),P=D.substring(0,d-I),k=D.substring(d+T))}return y.length*2>=p.length?[E,S,P,k,y]:null}var s=t(e,a,Math.ceil(e.length/4)),l=t(e,a,Math.ceil(e.length/2)),f;if(!s&&!l)return null;l?s?f=s[4].length>l[4].length?s:l:f=l:f=s;var g,u,v,m;r.length>n.length?(g=f[0],u=f[1],v=f[2],m=f[3]):(v=f[0],m=f[1],g=f[2],u=f[3]);var w=f[4];return[g,u,v,m,w]},h.prototype.diff_cleanupSemantic=function(r){for(var n=!1,e=[],a=0,i=null,t=0,s=0,l=0,f=0,g=0;t<r.length;)r[t][0]==c?(e[a++]=t,s=f,l=g,f=0,g=0,i=r[t][1]):(r[t][0]==b?f+=r[t][1].length:g+=r[t][1].length,i&&i.length<=Math.max(s,l)&&i.length<=Math.max(f,g)&&(r.splice(e[a-1],0,new h.Diff(_,i)),r[e[a-1]+1][0]=b,a--,a--,t=a>0?e[a-1]:-1,s=0,l=0,f=0,g=0,i=null,n=!0)),t++;for(n&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),t=1;t<r.length;){if(r[t-1][0]==_&&r[t][0]==b){var u=r[t-1][1],v=r[t][1],m=this.diff_commonOverlap_(u,v),w=this.diff_commonOverlap_(v,u);m>=w?(m>=u.length/2||m>=v.length/2)&&(r.splice(t,0,new h.Diff(c,v.substring(0,m))),r[t-1][1]=u.substring(0,u.length-m),r[t+1][1]=v.substring(m),t++):(w>=u.length/2||w>=v.length/2)&&(r.splice(t,0,new h.Diff(c,u.substring(0,w))),r[t-1][0]=b,r[t-1][1]=v.substring(0,v.length-w),r[t+1][0]=_,r[t+1][1]=u.substring(w),t++),t++}t++}},h.prototype.diff_cleanupSemanticLossless=function(r){function n(w,p){if(!w||!p)return 6;var D=w.charAt(w.length-1),A=p.charAt(0),M=D.match(h.nonAlphaNumericRegex_),d=A.match(h.nonAlphaNumericRegex_),y=M&&D.match(h.whitespaceRegex_),E=d&&A.match(h.whitespaceRegex_),S=y&&D.match(h.linebreakRegex_),P=E&&A.match(h.linebreakRegex_),k=S&&w.match(h.blanklineEndRegex_),T=P&&p.match(h.blanklineStartRegex_);return k||T?5:S||P?4:M&&!y&&E?3:y||E?2:M||d?1:0}for(var e=1;e<r.length-1;){if(r[e-1][0]==c&&r[e+1][0]==c){var a=r[e-1][1],i=r[e][1],t=r[e+1][1],s=this.diff_commonSuffix(a,i);if(s){var l=i.substring(i.length-s);a=a.substring(0,a.length-s),i=l+i.substring(0,i.length-s),t=l+t}for(var f=a,g=i,u=t,v=n(a,i)+n(i,t);i.charAt(0)===t.charAt(0);){a+=i.charAt(0),i=i.substring(1)+t.charAt(0),t=t.substring(1);var m=n(a,i)+n(i,t);m>=v&&(v=m,f=a,g=i,u=t)}r[e-1][1]!=f&&(f?r[e-1][1]=f:(r.splice(e-1,1),e--),r[e][1]=g,u?r[e+1][1]=u:(r.splice(e+1,1),e--))}e++}},h.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,h.whitespaceRegex_=/\s/,h.linebreakRegex_=/[\r\n]/,h.blanklineEndRegex_=/\n\r?\n$/,h.blanklineStartRegex_=/^\r?\n\r?\n/,h.prototype.diff_cleanupEfficiency=function(r){for(var n=!1,e=[],a=0,i=null,t=0,s=!1,l=!1,f=!1,g=!1;t<r.length;)r[t][0]==c?(r[t][1].length<this.Diff_EditCost&&(f||g)?(e[a++]=t,s=f,l=g,i=r[t][1]):(a=0,i=null),f=g=!1):(r[t][0]==_?g=!0:f=!0,i&&(s&&l&&f&&g||i.length<this.Diff_EditCost/2&&s+l+f+g==3)&&(r.splice(e[a-1],0,new h.Diff(_,i)),r[e[a-1]+1][0]=b,a--,i=null,s&&l?(f=g=!0,a=0):(a--,t=a>0?e[a-1]:-1,f=g=!1),n=!0)),t++;n&&this.diff_cleanupMerge(r)},h.prototype.diff_cleanupMerge=function(r){r.push(new h.Diff(c,""));for(var n=0,e=0,a=0,i="",t="",s;n<r.length;)switch(r[n][0]){case b:a++,t+=r[n][1],n++;break;case _:e++,i+=r[n][1],n++;break;case c:e+a>1?(e!==0&&a!==0&&(s=this.diff_commonPrefix(t,i),s!==0&&(n-e-a>0&&r[n-e-a-1][0]==c?r[n-e-a-1][1]+=t.substring(0,s):(r.splice(0,0,new h.Diff(c,t.substring(0,s))),n++),t=t.substring(s),i=i.substring(s)),s=this.diff_commonSuffix(t,i),s!==0&&(r[n][1]=t.substring(t.length-s)+r[n][1],t=t.substring(0,t.length-s),i=i.substring(0,i.length-s))),n-=e+a,r.splice(n,e+a),i.length&&(r.splice(n,0,new h.Diff(_,i)),n++),t.length&&(r.splice(n,0,new h.Diff(b,t)),n++),n++):n!==0&&r[n-1][0]==c?(r[n-1][1]+=r[n][1],r.splice(n,1)):n++,a=0,e=0,i="",t="";break}r[r.length-1][1]===""&&r.pop();var l=!1;for(n=1;n<r.length-1;)r[n-1][0]==c&&r[n+1][0]==c&&(r[n][1].substring(r[n][1].length-r[n-1][1].length)==r[n-1][1]?(r[n][1]=r[n-1][1]+r[n][1].substring(0,r[n][1].length-r[n-1][1].length),r[n+1][1]=r[n-1][1]+r[n+1][1],r.splice(n-1,1),l=!0):r[n][1].substring(0,r[n+1][1].length)==r[n+1][1]&&(r[n-1][1]+=r[n+1][1],r[n][1]=r[n][1].substring(r[n+1][1].length)+r[n+1][1],r.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(r)},h.prototype.diff_xIndex=function(r,n){var e=0,a=0,i=0,t=0,s;for(s=0;s<r.length&&(r[s][0]!==b&&(e+=r[s][1].length),r[s][0]!==_&&(a+=r[s][1].length),!(e>n));s++)i=e,t=a;return r.length!=s&&r[s][0]===_?t:t+(n-i)},h.prototype.diff_prettyHtml=function(r){for(var n=[],e=/&/g,a=/</g,i=/>/g,t=/\n/g,s=0;s<r.length;s++){var l=r[s][0],f=r[s][1],g=f.replace(e,"&amp;").replace(a,"&lt;").replace(i,"&gt;").replace(t,"&para;<br>");switch(l){case b:n[s]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case _:n[s]='<del style="background:#ffe6e6;">'+g+"</del>";break;case c:n[s]="<span>"+g+"</span>";break}}return n.join("")},h.prototype.diff_text1=function(r){for(var n=[],e=0;e<r.length;e++)r[e][0]!==b&&(n[e]=r[e][1]);return n.join("")},h.prototype.diff_text2=function(r){for(var n=[],e=0;e<r.length;e++)r[e][0]!==_&&(n[e]=r[e][1]);return n.join("")},h.prototype.diff_levenshtein=function(r){for(var n=0,e=0,a=0,i=0;i<r.length;i++){var t=r[i][0],s=r[i][1];switch(t){case b:e+=s.length;break;case _:a+=s.length;break;case c:n+=Math.max(e,a),e=0,a=0;break}}return n+=Math.max(e,a),n},h.prototype.diff_toDelta=function(r){for(var n=[],e=0;e<r.length;e++)switch(r[e][0]){case b:n[e]="+"+encodeURI(r[e][1]);break;case _:n[e]="-"+r[e][1].length;break;case c:n[e]="="+r[e][1].length;break}return n.join("	").replace(/%20/g," ")},h.prototype.diff_fromDelta=function(r,n){for(var e=[],a=0,i=0,t=n.split(/\t/g),s=0;s<t.length;s++){var l=t[s].substring(1);switch(t[s].charAt(0)){case"+":try{e[a++]=new h.Diff(b,decodeURI(l))}catch{throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var f=parseInt(l,10);if(isNaN(f)||f<0)throw new Error("Invalid number in diff_fromDelta: "+l);var g=r.substring(i,i+=f);t[s].charAt(0)=="="?e[a++]=new h.Diff(c,g):e[a++]=new h.Diff(_,g);break;default:if(t[s])throw new Error("Invalid diff operation in diff_fromDelta: "+t[s])}}if(i!=r.length)throw new Error("Delta length ("+i+") does not equal source text length ("+r.length+").");return e},h.prototype.match_main=function(r,n,e){if(r==null||n==null||e==null)throw new Error("Null input. (match_main)");return e=Math.max(0,Math.min(e,r.length)),r==n?0:r.length?r.substring(e,e+n.length)==n?e:this.match_bitap_(r,n,e):-1},h.prototype.match_bitap_=function(r,n,e){if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(n),i=this;function t(E,S){var P=E/n.length,k=Math.abs(e-S);return i.Match_Distance?P+k/i.Match_Distance:k?1:P}var s=this.Match_Threshold,l=r.indexOf(n,e);l!=-1&&(s=Math.min(t(0,l),s),l=r.lastIndexOf(n,e+n.length),l!=-1&&(s=Math.min(t(0,l),s)));var f=1<<n.length-1;l=-1;for(var g,u,v=n.length+r.length,m,w=0;w<n.length;w++){for(g=0,u=v;g<u;)t(w,e+u)<=s?g=u:v=u,u=Math.floor((v-g)/2+g);v=u;var p=Math.max(1,e-u+1),D=Math.min(e+u,r.length)+n.length,A=Array(D+2);A[D+1]=(1<<w)-1;for(var M=D;M>=p;M--){var d=a[r.charAt(M-1)];if(w===0?A[M]=(A[M+1]<<1|1)&d:A[M]=(A[M+1]<<1|1)&d|((m[M+1]|m[M])<<1|1)|m[M+1],A[M]&f){var y=t(w,M-1);if(y<=s)if(s=y,l=M-1,l>e)p=Math.max(1,2*e-l);else break}}if(t(w+1,e)>s)break;m=A}return l},h.prototype.match_alphabet_=function(r){for(var n={},e=0;e<r.length;e++)n[r.charAt(e)]=0;for(var e=0;e<r.length;e++)n[r.charAt(e)]|=1<<r.length-e-1;return n},h.prototype.patch_addContext_=function(r,n){if(n.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var e=n.substring(r.start2,r.start2+r.length1),a=0;n.indexOf(e)!=n.lastIndexOf(e)&&e.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,e=n.substring(r.start2-a,r.start2+r.length1+a);a+=this.Patch_Margin;var i=n.substring(r.start2-a,r.start2);i&&r.diffs.unshift(new h.Diff(c,i));var t=n.substring(r.start2+r.length1,r.start2+r.length1+a);t&&r.diffs.push(new h.Diff(c,t)),r.start1-=i.length,r.start2-=i.length,r.length1+=i.length+t.length,r.length2+=i.length+t.length}},h.prototype.patch_make=function(r,n,e){var a,i;if(typeof r=="string"&&typeof n=="string"&&typeof e>"u")a=r,i=this.diff_main(a,n,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(r&&typeof r=="object"&&typeof n>"u"&&typeof e>"u")i=r,a=this.diff_text1(i);else if(typeof r=="string"&&n&&typeof n=="object"&&typeof e>"u")a=r,i=n;else if(typeof r=="string"&&typeof n=="string"&&e&&typeof e=="object")a=r,i=e;else throw new Error("Unknown call format to patch_make.");if(i.length===0)return[];for(var t=[],s=new h.patch_obj,l=0,f=0,g=0,u=a,v=a,m=0;m<i.length;m++){var w=i[m][0],p=i[m][1];switch(!l&&w!==c&&(s.start1=f,s.start2=g),w){case b:s.diffs[l++]=i[m],s.length2+=p.length,v=v.substring(0,g)+p+v.substring(g);break;case _:s.length1+=p.length,s.diffs[l++]=i[m],v=v.substring(0,g)+v.substring(g+p.length);break;case c:p.length<=2*this.Patch_Margin&&l&&i.length!=m+1?(s.diffs[l++]=i[m],s.length1+=p.length,s.length2+=p.length):p.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,u),t.push(s),s=new h.patch_obj,l=0,u=v,f=g);break}w!==b&&(f+=p.length),w!==_&&(g+=p.length)}return l&&(this.patch_addContext_(s,u),t.push(s)),t},h.prototype.patch_deepCopy=function(r){for(var n=[],e=0;e<r.length;e++){var a=r[e],i=new h.patch_obj;i.diffs=[];for(var t=0;t<a.diffs.length;t++)i.diffs[t]=new h.Diff(a.diffs[t][0],a.diffs[t][1]);i.start1=a.start1,i.start2=a.start2,i.length1=a.length1,i.length2=a.length2,n[e]=i}return n},h.prototype.patch_apply=function(r,n){if(r.length==0)return[n,[]];r=this.patch_deepCopy(r);var e=this.patch_addPadding(r);n=e+n+e,this.patch_splitMax(r);for(var a=0,i=[],t=0;t<r.length;t++){var s=r[t].start2+a,l=this.diff_text1(r[t].diffs),f,g=-1;if(l.length>this.Match_MaxBits?(f=this.match_main(n,l.substring(0,this.Match_MaxBits),s),f!=-1&&(g=this.match_main(n,l.substring(l.length-this.Match_MaxBits),s+l.length-this.Match_MaxBits),(g==-1||f>=g)&&(f=-1))):f=this.match_main(n,l,s),f==-1)i[t]=!1,a-=r[t].length2-r[t].length1;else{i[t]=!0,a=f-s;var u;if(g==-1?u=n.substring(f,f+l.length):u=n.substring(f,g+this.Match_MaxBits),l==u)n=n.substring(0,f)+this.diff_text2(r[t].diffs)+n.substring(f+l.length);else{var v=this.diff_main(l,u,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(v)/l.length>this.Patch_DeleteThreshold)i[t]=!1;else{this.diff_cleanupSemanticLossless(v);for(var m=0,w,p=0;p<r[t].diffs.length;p++){var D=r[t].diffs[p];D[0]!==c&&(w=this.diff_xIndex(v,m)),D[0]===b?n=n.substring(0,f+w)+D[1]+n.substring(f+w):D[0]===_&&(n=n.substring(0,f+w)+n.substring(f+this.diff_xIndex(v,m+D[1].length))),D[0]!==_&&(m+=D[1].length)}}}}}return n=n.substring(e.length,n.length-e.length),[n,i]},h.prototype.patch_addPadding=function(r){for(var n=this.Patch_Margin,e="",a=1;a<=n;a++)e+=String.fromCharCode(a);for(var a=0;a<r.length;a++)r[a].start1+=n,r[a].start2+=n;var i=r[0],t=i.diffs;if(t.length==0||t[0][0]!=c)t.unshift(new h.Diff(c,e)),i.start1-=n,i.start2-=n,i.length1+=n,i.length2+=n;else if(n>t[0][1].length){var s=n-t[0][1].length;t[0][1]=e.substring(t[0][1].length)+t[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}if(i=r[r.length-1],t=i.diffs,t.length==0||t[t.length-1][0]!=c)t.push(new h.Diff(c,e)),i.length1+=n,i.length2+=n;else if(n>t[t.length-1][1].length){var s=n-t[t.length-1][1].length;t[t.length-1][1]+=e.substring(0,s),i.length1+=s,i.length2+=s}return e},h.prototype.patch_splitMax=function(r){for(var n=this.Match_MaxBits,e=0;e<r.length;e++)if(!(r[e].length1<=n)){var a=r[e];r.splice(e--,1);for(var i=a.start1,t=a.start2,s="";a.diffs.length!==0;){var l=new h.patch_obj,f=!0;for(l.start1=i-s.length,l.start2=t-s.length,s!==""&&(l.length1=l.length2=s.length,l.diffs.push(new h.Diff(c,s)));a.diffs.length!==0&&l.length1<n-this.Patch_Margin;){var g=a.diffs[0][0],u=a.diffs[0][1];g===b?(l.length2+=u.length,t+=u.length,l.diffs.push(a.diffs.shift()),f=!1):g===_&&l.diffs.length==1&&l.diffs[0][0]==c&&u.length>2*n?(l.length1+=u.length,i+=u.length,f=!1,l.diffs.push(new h.Diff(g,u)),a.diffs.shift()):(u=u.substring(0,n-l.length1-this.Patch_Margin),l.length1+=u.length,i+=u.length,g===c?(l.length2+=u.length,t+=u.length):f=!1,l.diffs.push(new h.Diff(g,u)),u==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(u.length))}s=this.diff_text2(l.diffs),s=s.substring(s.length-this.Patch_Margin);var v=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);v!==""&&(l.length1+=v.length,l.length2+=v.length,l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===c?l.diffs[l.diffs.length-1][1]+=v:l.diffs.push(new h.Diff(c,v))),f||r.splice(++e,0,l)}}},h.prototype.patch_toText=function(r){for(var n=[],e=0;e<r.length;e++)n[e]=r[e];return n.join("")},h.prototype.patch_fromText=function(r){var n=[];if(!r)return n;for(var e=r.split(`
`),a=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<e.length;){var t=e[a].match(i);if(!t)throw new Error("Invalid patch string: "+e[a]);var s=new h.patch_obj;for(n.push(s),s.start1=parseInt(t[1],10),t[2]===""?(s.start1--,s.length1=1):t[2]=="0"?s.length1=0:(s.start1--,s.length1=parseInt(t[2],10)),s.start2=parseInt(t[3],10),t[4]===""?(s.start2--,s.length2=1):t[4]=="0"?s.length2=0:(s.start2--,s.length2=parseInt(t[4],10)),a++;a<e.length;){var l=e[a].charAt(0);try{var f=decodeURI(e[a].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+f)}if(l=="-")s.diffs.push(new h.Diff(_,f));else if(l=="+")s.diffs.push(new h.Diff(b,f));else if(l==" ")s.diffs.push(new h.Diff(c,f));else{if(l=="@")break;if(l!=="")throw new Error('Invalid patch mode "'+l+'" in: '+f)}a++}}return n},h.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},h.patch_obj.prototype.toString=function(){var r,n;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2==1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var e=["@@ -"+r+" +"+n+` @@
`],a,i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case b:a="+";break;case _:a="-";break;case c:a=" ";break}e[i+1]=a+encodeURI(this.diffs[i][1])+`
`}return e.join("").replace(/%20/g," ")},o.exports=h,o.exports.diff_match_patch=h,o.exports.DIFF_DELETE=_,o.exports.DIFF_INSERT=b,o.exports.DIFF_EQUAL=c})($),O({calculateDiff:(o,h)=>{const _=new $.exports.diff_match_patch,b=_.diff_main(o,h);return _.diff_cleanupSemantic(b),b}})})();
